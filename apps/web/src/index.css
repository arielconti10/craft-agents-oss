/**
 * Craft Agent Web - Main stylesheet
 *
 * Imports the shared UI theme and adds web-specific styles.
 * The shared theme includes: Tailwind v4, color system, typography plugin,
 * shadow utilities, spinner, shimmer animations, etc.
 */

@import "../../../packages/ui/src/styles/index.css";

/* Tell Tailwind where to scan for utility classes */
@source "../**/*.{tsx,ts,jsx,js}";
@source "../../../packages/ui/src/**/*.{tsx,ts,jsx,js}";
@source "../../../packages/shared/src/**/*.{tsx,ts,jsx,js}";

/* =============================================================================
   WEB-SPECIFIC OVERRIDES

   Additions and overrides specific to the web app that don't belong in shared.
============================================================================= */

/* Full-height app container for web */
@layer base {
  html, body, #root {
    height: 100%;
    overflow: hidden;
  }
}

/* =============================================================================
   Z-INDEX SCALE (shared with Electron)

   These should ideally be in the shared package, but added here for now.
============================================================================= */

:root {
  --z-base: 0;
  --z-local: 10;
  --z-sticky: 20;
  --z-titlebar: 40;
  --z-panel: 50;
  --z-dropdown: 100;
  --z-tooltip: 150;
  --z-modal: 200;
  --z-overlay: 300;
  --z-fullscreen: 350;
  --z-floating-backdrop: 390;
  --z-floating-menu: 400;
  --z-splash: 600;
}

/* Tailwind v4 theme extension for z-index */
@theme inline {
  --z-index-base: var(--z-base);
  --z-index-local: var(--z-local);
  --z-index-sticky: var(--z-sticky);
  --z-index-titlebar: var(--z-titlebar);
  --z-index-panel: var(--z-panel);
  --z-index-dropdown: var(--z-dropdown);
  --z-index-tooltip: var(--z-tooltip);
  --z-index-modal: var(--z-modal);
  --z-index-overlay: var(--z-overlay);
  --z-index-fullscreen: var(--z-fullscreen);
  --z-index-floating-backdrop: var(--z-floating-backdrop);
  --z-index-floating-menu: var(--z-floating-menu);
  --z-index-splash: var(--z-splash);
}

/* =============================================================================
   ADDITIONAL UTILITIES

   Web-specific utility classes not in shared.
============================================================================= */

@layer utilities {
  /* Mask fade for scroll containers */
  .mask-fade-y {
    mask-image: linear-gradient(to bottom, transparent 0%, black 32px, black calc(100% - 32px), transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 32px, black calc(100% - 32px), transparent 100%);
  }

  /* Thin border shadow - lighter than shadow-minimal */
  .shadow-thin {
    box-shadow:
      rgba(0, 0, 0, 0) 0px 0px 0px 0px,
      rgba(0, 0, 0, 0) 0px 0px 0px 0px,
      rgba(var(--foreground-rgb), 0.06) 0px 0px 0px 1px;
  }
}

/* =============================================================================
   RADIX UI ANIMATION OVERRIDES

   Disable animations for dialogs, dropdowns, popovers for snappier feel.
============================================================================= */

[data-radix-dialog-overlay],
[role="dialog"][data-state],
[data-radix-dialog-content],
[data-radix-menu-content],
[data-radix-dropdown-menu-content],
[data-radix-popover-content],
[data-radix-select-content],
[data-radix-tooltip-content],
[data-radix-context-menu-content],
[data-radix-alert-dialog-overlay],
[data-radix-alert-dialog-content] {
  animation: none !important;
}

/* Fix ScrollArea internal div preventing content shrink */
[data-radix-scroll-area-viewport] > div {
  min-width: 0 !important;
  display: block !important;
}

/* =============================================================================
   FOCUS STYLES

   Keyboard navigation focus indicators.
============================================================================= */

[role="listbox"] button:focus-visible,
[role="tree"] button:focus-visible,
[role="treeitem"]:focus-visible,
[role="option"]:focus-visible,
[data-focus-zone] button:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 1px var(--ring);
}

[role="option"][aria-selected="true"]:focus-visible,
[role="treeitem"][aria-selected="true"]:focus-visible {
  box-shadow: inset 0 0 0 1px var(--ring);
}

[data-focus-zone]:focus-visible {
  outline: none;
}

/* =============================================================================
   LIST SEPARATOR VISIBILITY

   Hide separators on hover/selection for session, source, and import lists.
============================================================================= */

.session-item:hover > .session-separator,
.session-item[data-selected] > .session-separator,
.session-item:hover + .session-item > .session-separator,
.session-item[data-selected] + .session-item > .session-separator {
  opacity: 0;
}

.source-item:hover > .source-separator,
.source-item[data-selected] > .source-separator,
.source-item:hover + .source-item > .source-separator,
.source-item[data-selected] + .source-item > .source-separator {
  opacity: 0;
}

.import-item:hover > .import-separator,
.import-item[data-selected] > .import-separator,
.import-item:hover + .import-item > .import-separator,
.import-item[data-selected] + .import-item > .import-separator {
  opacity: 0;
}

/* =============================================================================
   ADDITIONAL ANIMATIONS

   Animations used by the web app.
============================================================================= */

/* Text shimmer - subtle opacity pulse for inline text */
.animate-shimmer-text {
  animation: shimmer-text 1.2s ease-in-out infinite;
}

@keyframes shimmer-text {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Shake animation - for invalid actions */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

.animate-shake {
  animation: shake 0.4s ease-in-out;
}
